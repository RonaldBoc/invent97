<div class="flex flex-col gap-6">
  <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h1 class="text-2xl font-semibold text-slate-900">Types de matériel</h1>
      <p class="text-sm text-slate-600">Catalogue des catégories disponibles lors de la création d'un équipement.</p>
    </div>
    <a
      href="/types/ajouter"
      class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"
    >
      Nouveau type
    </a>
  </div>

  <% if (successMessage) { %>
    <div class="rounded-md border border-emerald-300 bg-emerald-50 px-4 py-3 text-sm text-emerald-700">
      <%= successMessage %>
    </div>
  <% } %>
  <% if (errorMessage) { %>
    <div class="rounded-md border border-rose-300 bg-rose-50 px-4 py-3 text-sm text-rose-700">
      <%= errorMessage %>
    </div>
  <% } %>

  <% if (!types || types.length === 0) { %>
    <div class="rounded-lg border border-dashed border-slate-300 bg-white p-8 text-center text-sm text-slate-600">
      Aucun type enregistré pour le moment. Ajoutez votre première catégorie pour alimenter le formulaire d'équipement.
    </div>
  <% } else { %>
    <div class="overflow-x-auto rounded-lg border border-slate-200 bg-white shadow-sm">
      <table class="min-w-full divide-y divide-slate-200 text-sm">
        <thead class="bg-slate-50">
          <tr>
            <th class="px-4 py-3 text-left font-semibold text-slate-600">Nom</th>
            <th class="px-4 py-3 text-left font-semibold text-slate-600">Description</th>
            <th class="px-4 py-3 text-left font-semibold text-slate-600">Équipements</th>
            <th class="px-4 py-3 text-right font-semibold text-slate-600">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          <% types.forEach((typeItem) => { %>
            <tr class="hover:bg-slate-50">
              <td class="px-4 py-3 font-medium text-slate-900"><%= typeItem.nom %></td>
              <td class="px-4 py-3 text-slate-600"><%= typeItem.description || '—' %></td>
              <td class="px-4 py-3">
                <% if (typeItem.equipement_count > 0) { %>
                  <span class="inline-flex items-center rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-700">
                    <%= typeItem.equipement_count %> lié(s)
                  </span>
                <% } else { %>
                  <span class="text-slate-400">—</span>
                <% } %>
              </td>
              <td class="px-4 py-3 text-right">
                <div class="flex justify-end gap-2">
                  <a href="/types/modifier/<%= typeItem.id %>" class="rounded-md border border-slate-300 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50">
                    Modifier
                  </a>
                  <a
                    href="/types/supprimer/<%= typeItem.id %>"
                    class="rounded-md border border-rose-300 px-3 py-1 text-xs font-medium text-rose-600 hover:bg-rose-50"
                    onclick="return confirm('Supprimer ce type ? Les équipements existants conserveront leur libellé mais ne seront plus reliés.');"
                  >
                    Supprimer
                  </a>
                </div>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } %>
</div>
